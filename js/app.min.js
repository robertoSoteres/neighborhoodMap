function viewModel(){var e=this;this.searchTerm=ko.observable(""),this.listaLugares=ko.observableArray([]),Map=new google.maps.Map(document.getElementById("map"),{center:{lat:40.484225,lng:-3.701123},zoom:12}),ko.onError=function(e){alert("Error --\x3e ",e)},lugares.forEach(function(a){e.listaLugares.push(new lugar(a))}),this.filtrarLista=ko.computed(function(){var a=e.searchTerm().toLowerCase();return a?ko.utils.arrayFilter(e.listaLugares(),function(e){var n=e.name.toLowerCase().search(a)>=0;return e.visible(n),n}):(e.listaLugares().forEach(function(e){e.visible(!0)}),e.listaLugares())},e)}function init(){ko.applyBindings(new viewModel)}function errorMap(){alert("Google maps has failed.")}var lugares=[{nombre:"Cines La Vaguada",lat:40.482837,long:-3.707618,placeID:"ChIJfcPuDJwpQg0RUGr2lxan8DA"},{nombre:"Cinesa Manoteras",lat:40.486345,long:-3.66574,placeID:"ChIJMXa3qDohQg0RXPRJGqfP9ls"},{nombre:"Autocine Fuencarral",lat:40.485569,long:-3.678341,placeID:"ChIJU5xT7FwpQg0RYOKcJVNVB0s"},{nombre:"Kin√©polis Diversia",lat:40.530067,long:-3.639312,placeID:"ChIJHyaMsV0sQg0RoRzZUkypj5E"},{nombre:"Cine Plaza norte 2",lat:40.541287,long:-3.615794,placeID:"ChIJZ1V8C94sQg0R4FhCviwku6s"}],Map,lugar=function(e){var a=this;this.name=e.nombre,this.lat=e.lat,this.long=e.long,this.placeID=e.placeID,this.address="",this.telf="",this.visible=ko.observable(!0),this.InfoWindow=new google.maps.InfoWindow({content:a.contentString}),new google.maps.places.PlacesService(Map).getDetails({placeId:e.placeID},function(e,n){n===google.maps.places.PlacesServiceStatus.OK&&(a.address=e.formatted_address,a.telf=e.formatted_phone_number)}),this.Marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.long),map:Map,icon:"images/cinemaImage.png",title:e.nombre}),this.Marker.addListener("click",function(){a.contentString='<div class="info-window-content"><div class="title"><b>'+e.nombre+'</b></div><div class="content">Address: '+a.address+'</div><div class="content">Phone: '+a.telf+'</div><div class="content">Lat: '+a.lat+'</div><div class="content">Long: '+a.long+"</div></div>",a.InfoWindow.setContent(a.contentString),a.InfoWindow.open(Map,this),a.Marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.Marker.setAnimation(null)},3550)}),this.showMarker=ko.computed(function(){return!0===this.visible()?this.Marker.setMap(Map):this.Marker.setMap(null),!0},this),this.animacion=function(e){google.maps.event.trigger(a.Marker,"click")},$("#nav-icon").click(function(){$(this).hasClass("open")?($(this).removeClass("open"),$("#search").css("left","-50vw")):($(this).toggleClass("open"),$("#search").css("left",0))})};